html, body {
  margin: 0;
  height: 100%;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
  background: #0b1225;
  color: #e6edf3;
}
#ui {
  position: absolute;
  top: 12px;
  left: 12px;
  right: 12px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  z-index: 10;
}
.hud {
  display: flex;
  gap: 18px;
  background: rgba(0,0,0,0.3);
  padding: 10px 14px;
  border-radius: 10px;
  backdrop-filter: blur(4px);
}
.controls {
  display: flex;
  gap: 10px;
}
button {
  background: #1f6feb;
  color: #fff;
  border: none;
  padding: 8px 12px;
  border-radius: 8px;
  cursor: pointer;
}
button:hover { filter: brightness(1.1); }
button:active { filter: brightness(0.9); }

#answerInput {
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  top: 64px;
  width: 420px;
  max-width: calc(100% - 40px);
  padding: 10px 12px;
  border-radius: 8px;
  border: 1px solid #2b2f3a;
  background: #0f172a;
  color: #e6edf3;
}

#answerInput.bottom-input {
  position: fixed !important;
  top: auto !important;
  bottom: 96px !important;
  left: 50% !important;
  transform: translateX(-50%) !important;
  z-index: 25 !important;
}

#game {
  display: block;
  margin: 0 auto;
  border: 1px solid #1e293b;
  background: linear-gradient(180deg, #0b1225 0%, #0e1a35 100%);
}

.hidden { display: none !important; visibility: hidden !important; pointer-events: none !important; }

#home {
  position: fixed;
  inset: 0;
  display: grid;
  place-items: center;
  z-index: 30;
  background: url('public/homepage.png') center/cover no-repeat;
}
.home-wrap { width: 800px; max-width: calc(100% - 40px); }
.home-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; }
.home-card { padding: 30px 20px; border-radius: 12px; border: 1px solid #1e293b; background: #0f172a; font-size: 18px; cursor: pointer; }
.home-card:hover { filter: brightness(1.1); }

#summary {
  position: fixed;
  right: 12px;
  bottom: 64px;
  z-index: 20;
}
#flashcards {
  position: fixed;
  left: 12px;
  bottom: 64px;
  z-index: 20;
}
.summary-card {
  position: relative;
  background: #0f172a;
  border: 1px solid #1e293b;
  border-radius: 12px;
  padding: 16px;
  width: 720px;
  max-width: calc(100% - 40px);
}
.summary-row {
  display: grid;
  grid-template-columns: 1.5fr 1fr 1fr 1fr;
  gap: 10px;
  padding: 8px;
  border-bottom: 1px dashed #1e293b;
}
.bar {
  height: 8px;
  background: #1e293b;
  border-radius: 4px;
  overflow: hidden;
}
.bar > span {
  display: block;
  height: 100%;
  background: #22c55e;
}

#flashcards {
  position: fixed;
  left: 12px;
  bottom: 64px;
  z-index: 20;
}
.fc-container {
  display: grid;
  gap: 12px;
}
.fc-categories {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 12px;
}
.fc-category {
  background: #0f172a;
  border: 1px solid #1e293b;
  border-radius: 10px;
  padding: 14px;
  cursor: pointer;
  transition: transform .2s ease, background .2s ease;
}
.fc-category:hover { transform: translateY(-2px); background: #0e1626; }
.fc-category h3 { margin: 0 0 6px 0; }
.fc-count { color: #9ca3af; }
.fc-list {
  display: grid;
  gap: 8px;
}
.fc-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 12px;
  border: 1px solid #1e293b;
  border-radius: 8px;
  background: #0b1225;
}
.fc-actions { display: flex; gap: 8px; }
.fc-btn {
  background: #1f6feb;
  color: #fff;
  border: none;
  padding: 6px 10px;
  border-radius: 8px;
  cursor: pointer;
}
.fc-btn.alt { background: #3b82f6; }
.fc-header { display:flex; justify-content: space-between; align-items: center; margin-bottom: 8px; }
.fc-header { position: sticky; top: 0; padding: 10px; margin-bottom: 8px; background: #0f172a; border-bottom: 1px solid #1e293b; box-shadow: 0 2px 0 rgba(0,0,0,0.2); }
.fc-header .back { background:#374151; color:#fff; padding:6px 10px; border-radius:8px; cursor:pointer; }
.fc-view { opacity: 0; transform: translateY(6px); transition: opacity .25s ease, transform .25s ease; }
.fc-view.show { opacity: 1; transform: translateY(0); }
.fc-quiz { display:grid; gap:12px; }
.fc-choices { display:grid; gap:8px; }
.fc-choice {
  padding: 10px 12px;
  border: 1px solid #1e293b;
  border-radius: 8px;
  background: #0b1225;
  cursor: pointer;
}
.fc-choice.correct { border-color: #22c55e; background: #0b2620; }
.fc-choice.wrong { border-color: #ef4444; background: #2a0f10; }
.fc-card {
  perspective: 1000px;
}
.fc-card-inner {
  position: relative;
  width: 100%;
  height: 140px;
  transform-style: preserve-3d;
  transition: transform .4s ease;
}
.fc-card-inner.flip { transform: rotateY(180deg); }
.fc-card-face {
  position: absolute;
  inset: 0;
  display: grid;
  place-items: center;
  padding: 12px;
  border: 1px solid #1e293b;
  border-radius: 10px;
  background: #0b1225;
  backface-visibility: hidden;
}
.fc-card-face.back { transform: rotateY(180deg); }
.fc-card-controls { display:flex; gap:8px; margin-top:10px; }
.fc-list { overflow-y: auto; max-height: 55vh; padding-right: 6px; }
#flashcards .summary-card { display: flex; flex-direction: column; max-height: 70vh; }

#veg {
  position: fixed;
  inset: 0;
  display: grid;
  grid-template-rows: auto 1fr auto;
  padding: 12px;
  gap: 12px;
  padding-bottom: 140px;
}
.veg-hud { display:flex; gap: 14px; background: rgba(0,0,0,0.3); padding: 10px 14px; border-radius: 10px; }
.veg-hide { display: none; }
.veg-board { 
  position: fixed;
  left: 50%;
  top: calc(50% - 180px);
  transform: translateX(-50%);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 21;
}
.veg-card { border:1px solid #1e293b; border-radius:10px; background:#0f172a; padding: 14px; text-align:center; position: relative; }
.veg-card.cut { transform: scale(0.96); filter: saturate(1.2); }
.veg-cut { position:absolute; inset:0; display:grid; place-items:center; font-size:28px; opacity:0; animation: pop .3s ease forwards; }
@keyframes pop { from { opacity:0; transform: scale(0.7); } to { opacity:1; transform: scale(1); } }
.veg-controls { display:flex; gap: 8px; }
.veg-carrot {
  position: fixed;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  width: 280px;
  max-width: 40vw;
  opacity: 0.9;
  pointer-events: none;
  z-index: 22;
}
.veg-overlay {
  position: fixed;
  inset: 0;
  display: grid;
  place-items: center;
  background: rgba(255,0,0,0.22);
  z-index: 26;
}
#veg.veg-success .veg-overlay {
  background: rgba(34,197,94,0.3) !important; /* 薄緑色の背景 */
}
#vegCountdown {
  background: rgba(100,100,100,0.5) !important;
  z-index: 35 !important; /* ボタンより前面に表示 */
}
#vegPause {
  background: rgba(0,0,0,0.5) !important;
  z-index: 35 !important; /* ボタンより前面に表示 */
}
#vegPassOverlay {
  background: rgba(200,0,0,0.3) !important;
  z-index: 35 !important; /* ボタンより前面に表示 */
}
#vegResult {
  position: fixed;
  inset: 0;
  display: grid;
  place-items: center;
  z-index: 40 !important; /* 最前面に表示 */
  background: rgba(0,0,0,0.7);
}
#veg.pass-mode {
  background-color: rgba(200,0,0,0.2);
}
#veg.veg-success {
  background-color: rgba(34,197,94,0.15) !important; /* 薄緑色の背景 */
}
.veg-overlay-content { text-align:center; }
.veg-overlay-content #vegOverlayTitle { font-size: 64px; color: #ef4444; }
#veg.veg-success .veg-overlay-content #vegOverlayTitle {
  color: #22c55e !important; /* 緑色のテキスト */
}
.veg-overlay-content #vegOverlayPenalty { font-size: 40px; color: #ef4444; }
@keyframes vegshake { 0%{ transform: translate(0,0);} 20%{ transform: translate(12px,-8px);} 40%{ transform: translate(-10px,6px);} 60%{ transform: translate(8px,-6px);} 80%{ transform: translate(-6px,4px);} 100%{ transform: translate(0,0);} }
#veg.veg-shake { animation: vegshake 0.7s ease; }
#answerInput.bottom-input {
  position: fixed !important;
  top: auto !important;
  bottom: 108px !important;
  left: 50% !important;
  transform: translateX(-50%) !important;
  z-index: 25 !important;
}
#veg {
  position: fixed;
  inset: 0;
  display: grid;
  grid-template-rows: auto 1fr auto;
  padding: 12px;
  gap: 12px;
  padding-bottom: 160px;
  background: url('public/vegibackground.png') center/cover no-repeat;
}
.veg-hud { display:flex; gap: 14px; background: rgba(0,0,0,0.3); padding: 10px 14px; border-radius: 10px; }
/* Top layout for vegetable mode */
body.veg-mode .controls {
  position: fixed;
  top: 12px;
  right: 12px;
  z-index: 24;
}
body.veg-mode .veg-hud {
  position: fixed;
  bottom: 60px;
  left: 12px;
  right: 12px;
  z-index: 23;
}
/* Restore vegetable round controls to bottom center */
.veg-controls {
  position: fixed;
  bottom: 12px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 30;
}
